parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"Qheb":[function(require,module,exports) {
"use strict";function e(n){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(n)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.isEmptyElement=p,exports.isTextElement=u,exports.isRealElement=s,exports.isTagElement=a,exports.isComponentElement=c,exports.hasElementChanged=d,exports.useState=v,exports.default=exports.VIRTUAL_ELEMENT_EMPTY=exports.VirtualElementTypesEnum=void 0;var n,t,r=function(){return(r=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e}).apply(this,arguments)};exports.VirtualElementTypesEnum=n,function(e){e[e.Tag=0]="Tag",e[e.Component=1]="Component"}(n||(exports.VirtualElementTypesEnum=n={}));var o="VIRTUAL_ELEMENT_EMPTY";function p(e){return e===o}function u(e){return"string"==typeof e&&!p(e)}function s(n){return"object"===e(n)}function a(e){return s(e)&&e.type===n.Tag}function c(e){return s(e)&&e.type===n.Component}function i(t,r){for(var p=[],u=2;u<arguments.length;u++)p[u-2]=arguments[u];if(r||(r={}),"function"==typeof t){var s={$element:{},$prevElement:{},Component:t,key:r&&r.key?String(r.key):void 0,name:t.name,props:r,children:p,isUnmounted:!1,state:{cursor:0,byCursor:[]},render:function(){var e=m(s);if(e){var n=f(s.$element,[e]);s.$prevElement=s.$element,s.$element=l(s,n)}return s.$element},forceUpdate:function(e){if(e&&(s.props=e),s.onUpdate&&!s.isUnmounted){var n=s.$element;s.render(),s.$element!==n&&s.onUpdate(s.$prevElement,s.$element)}}};return s.$element=l(s),s.$element}var a=Array.isArray(p[0])?p[0]:p;return{type:n.Tag,tag:t,props:r,children:a.map(function(n){return"object"===e(n)?n:!1===n?o:String(n)})}}exports.VIRTUAL_ELEMENT_EMPTY=o;var l=function(e,t){void 0===t&&(t=[]);var r=e.props;return{componentInstance:e,type:n.Component,props:r,children:t}};function m(e){(t=e).state.cursor=0;var n=e.Component,o=e.props,p=e.children;return n(r(r({},o),{children:p}))}function f(e,n){for(var t=e.children.length,r=n.length,p=Math.max(t,r),u=[],s=0;s<p;s++)u.push(y(e,s,e.children[s],n[s])||o);return u}function y(e,n,t,r){if(s(t)&&s(r)&&!d(t,r)){if(c(t)&&c(r))return t.componentInstance.props=r.componentInstance.props,t.componentInstance.render();r.children=f(t,r.children)}else if(c(t)&&(t.componentInstance.isUnmounted=!0),c(r))return r.componentInstance.render();return r}function d(n,t){return e(n)!==e(t)||(u(n)||u(t)?n!==t:n.type!==t.type||(a(n)&&a(t)?n.tag!==t.tag:c(n)&&c(t)?n.componentInstance.Component!==t.componentInstance.Component:void 0))}function v(e){var n,r=t.state,o=r.cursor,p=r.byCursor;return void 0===p[o]&&(p[o]={value:e,setter:(n=t,function(e){p[o].value!==e&&(p[o].value=e,n.forceUpdate())})},t.state.cursor++),[p[o].value,p[o].setter]}var E={createElement:i};exports.default=E;
},{}],"THza":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../lib/teact"),t=function(){var t=(0,e.useState)(0)[1];return function(){t(Math.random())}};exports.default=t;
},{"../lib/teact":"Qheb"}],"fQLZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=function(e){var r;do{r=String(Math.random()).replace("0.","id")}while(e.hasOwnProperty(r));return r};exports.default=e;
},{}],"hOCW":[function(require,module,exports) {
"use strict";function e(e){var t,r=!1;return function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];t=n,r||(r=!0,requestAnimationFrame(function(){r=!1,e.apply(void 0,t)}))}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"g4k8":[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setGlobal=P,exports.getGlobal=b,exports.getDispatch=h,exports.addReducer=m,exports.withGlobal=w,exports.default=void 0;var e=a(require("../hooks/useForceUpdate")),t=a(require("../util/generateIdFor")),r=a(require("../util/throttleWithRaf")),o=u(require("./teact"));function n(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return n=function(){return e},e}function u(e){if(e&&e.__esModule)return e;var t=n();if(t&&t.has(e))return t.get(e);var r={};if(null!=e){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var a=o?Object.getOwnPropertyDescriptor(e,u):null;a&&(a.get||a.set)?Object.defineProperty(r,u,a):r[u]=e[u]}}return r.default=e,t&&t.set(e,r),r}function a(e){return e&&e.__esModule?e:{default:e}}var i=function(){return(i=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},c=o.default;exports.default=c;var p={isInitialized:!1,chats:{byId:{}},messages:{byChatId:{}}},f=p,s={},l=[j],d={},v={};function P(e){console.log("[State] UPDATE",{global:f,newGlobal:e}),void 0!==e&&e!==f&&(f=e),g()}function b(){return f}function h(){return d}function y(e,t){s[e]&&s[e].forEach(function(e){var r=e(f,d,t);void 0!==r&&r!==f&&(f=r)}),g()}function O(){l.forEach(function(e){return e(f)})}var g=(0,r.default)(O);function j(){Object.keys(v).forEach(function(e){var t=v[e],r=t.mapStateToProps,o=t.mapReducersToProps,n=t.ownProps,u=t.mappedProps,a=t.forceUpdate,c=i(i({},r(f,n)),o(P,d));x(u,c)||(v[e].mappedProps=c,a())})}function m(e,t){s[e]||(s[e]=[],d[e]=function(t){console.log("[State] ACTION",e,t),y(e,t)}),s[e].push(t)}function w(r,n){return void 0===r&&(r=function(){return{}}),void 0===n&&(n=function(){return{}}),function(u){return function(a){var c=(0,o.useState)((0,t.default)(v))[0],p=(0,e.default)();return v[c]||(v[c]={mapStateToProps:r,mapReducersToProps:n,ownProps:a,mappedProps:i(i({},r(f,a)),n(P,d)),forceUpdate:p}),v[c].ownProps=a,o.default.createElement(u,i({},v[c].mappedProps,a))}}}function x(e,t){var r=Object.keys(e);return r.length===Object.keys(t).length&&r.every(function(r){return e[r]===t[r]})}
},{"../hooks/useForceUpdate":"THza","../util/generateIdFor":"fQLZ","../util/throttleWithRaf":"hOCW","./teact":"Qheb"}],"DDjc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e,n=require("./teact");function t(n,t){t&&(r(t,0,e,n),e=n)}function r(e,t,o,l){var p=e.childNodes[t];!o&&l?e.appendChild(s(l,e,t)):o&&!l?e.removeChild(p):o&&l&&((0,n.hasElementChanged)(o,l)?e.replaceChild(s(l,e,t),p):(0,n.isRealElement)(o)&&(0,n.isRealElement)(l)&&((0,n.isTagElement)(o)&&c(o,l,p),(0,n.isComponentElement)(l)?r(e,t,i(o.children[0]),l.children[0]):a(o,l,p)))}function o(e,n,t){return e.componentInstance.onUpdate=function(e,o){r(n,t,e,o)},e.children.length?e:e.componentInstance.render()}function i(e){return(0,n.isComponentElement)(e)?e.componentInstance.$prevElement:e}function s(e,t,i){if((0,n.isEmptyElement)(e))return document.createTextNode("");if((0,n.isTextElement)(e))return document.createTextNode(e);if((0,n.isComponentElement)(e))return s((e=o(e,t,i)).children[0],t,i);var a=e.tag,c=e.props,l=e.children,d=void 0===l?[]:l,u=document.createElement(a);return(0,n.isTagElement)(e)&&Object.keys(c).forEach(function(e){p(u,e,c[e])}),d.forEach(function(e,n){r(u,n,null,e)}),u}function a(e,t,o){for(var s=(0,n.isRealElement)(e)?e.children.length:0,a=(0,n.isRealElement)(t)?t.children.length:0,c=Math.max(s,a),l=0;l<c;l++){r(o,l,i(e.children[l]),(0,n.isRealElement)(t)?t.children[l]:n.VIRTUAL_ELEMENT_EMPTY)}}function c(e,n,t){var r=Object.keys(e.props),o=Object.keys(n.props);r.forEach(function(r){n.props.hasOwnProperty(r)||d(t,r,e.props[r])}),o.forEach(function(r){l(t,r)&&e.props[r]!==n.props[r]&&d(t,r,e.props[r]),p(t,r,n.props[r])})}function l(e,n){return"className"===n?void 0!==e.className:!!n.startsWith("on")||void e.hasAttribute(n)}function p(e,n,t){"className"===n?e.className=t:n.startsWith("on")?(e.addEventListener(n.replace(/^on/,"").toLowerCase(),t),"onChange"===n&&u(e,t)):e.setAttribute(n,t)}function d(e,n,t){"className"===n?delete e.className:n.startsWith("on")?(e.removeEventListener(n.replace(/^on/,"").toLowerCase(),t),"onChange"===n&&m(e,t)):e.removeAttribute(n)}function u(e,n){e.addEventListener("input",n),e.addEventListener("paste",n)}function m(e,n){e.removeEventListener("paste",n),e.removeEventListener("input",n)}var h={render:t};exports.default=h;
},{"./teact":"Qheb"}],"byz7":[function(require,module,exports) {
var define;
var e;!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof e&&e.amd?e("tdweb",[],n):"object"==typeof exports?exports.tdweb=n():t.tdweb=n()}(this,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=9)}([function(e,t,n){e.exports=n(13)},function(e,t){e.exports=!1},function(e,t){function n(e,t,n,r,o,i,a){try{var s=e[i](a),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,o)}e.exports=function(e){return function(){var t=this,r=arguments;return new Promise(function(o,i){var a=e.apply(t,r);function s(e){n(a,o,i,s,u,"next",e)}function u(e){n(a,o,i,s,u,"throw",e)}s(void 0)})}}},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}},function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(t){return"function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?e.exports=r=function(e){return n(e)}:e.exports=r=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":n(e)},r(t)}e.exports=r},function(e,t,n){var r=n(10),o=n(11),i=n(12);e.exports=function(e,t){return r(e)||o(e,t)||i()}},function(e,t,n){e.exports=function(){return new Worker(n.p+"2380cfa0e562e148fa50.worker.js")}},function(e,t,n){var r=n(15),o=n(16);e.exports=function(e,t,n){var i=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var a=(e=e||{}).random||(e.rng||r)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t)for(var s=0;s<16;++s)t[i+s]=a[s];return t||o(a)}},function(e,t,n){e.exports=n(17)},function(e,t){e.exports=function(e){if(Array.isArray(e))return e}},function(e,t){e.exports=function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(u){o=!0,i=u}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}},function(e,t,n){var r=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function u(e,t,n,r){var o=t&&t.prototype instanceof y?t:y,i=Object.create(o.prototype),a=new P(r||[]);return i._invoke=function(e,t,n){var r=l;return function(o,i){if(r===d)throw new Error("Generator is already running");if(r===h){if("throw"===o)throw i;return C()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var s=S(a,n);if(s){if(s===p)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===l)throw r=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var u=c(e,t,n);if("normal"===u.type){if(r=n.done?h:f,u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=h,n.method="throw",n.arg=u.arg)}}}(e,n,a),i}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(r){return{type:"throw",arg:r}}}e.wrap=u;var l="suspendedStart",f="suspendedYield",d="executing",h="completed",p={};function y(){}function v(){}function m(){}var g={};g[i]=function(){return this};var w=Object.getPrototypeOf,b=w&&w(w(M([])));b&&b!==n&&r.call(b,i)&&(g=b);var k=m.prototype=y.prototype=Object.create(g);function x(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function _(e){var t;this._invoke=function(n,o){function i(){return new Promise(function(t,i){!function t(n,o,i,a){var s=c(e[n],e,o);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==typeof l&&r.call(l,"__await")?Promise.resolve(l.__await).then(function(e){t("next",e,i,a)},function(e){t("throw",e,i,a)}):Promise.resolve(l).then(function(e){u.value=e,i(u)},function(e){return t("throw",e,i,a)})}a(s.arg)}(n,o,t,i)})}return t=t?t.then(i,i):i()}}function S(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,S(e,n),"throw"===n.method))return p;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var o=c(r,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,p;var i=o.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,p):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,p)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function M(e){if(e){var n=e[i];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}return{next:C}}function C(){return{value:t,done:!0}}return v.prototype=k.constructor=m,m.constructor=v,m[s]=v.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,s in e||(e[s]="GeneratorFunction")),e.prototype=Object.create(k),e},e.awrap=function(e){return{__await:e}},x(_.prototype),_.prototype[a]=function(){return this},e.AsyncIterator=_,e.async=function(t,n,r,o){var i=new _(u(t,n,r,o));return e.isGeneratorFunction(n)?i:i.next().then(function(e){return e.done?e.value:i.next()})},x(k),k[s]="Generator",k[i]=function(){return this},k.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=M,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(E),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return s.type="throw",s.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;E(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:M(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),p}},e}(e.exports);try{regeneratorRuntime=r}catch(o){Function("r","regeneratorRuntime = r")(r)}},function(e,t){},function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);e.exports=function(){return n(r),r}}else{var o=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),o[t]=e>>>((3&t)<<3)&255;return o}}},function(e,t){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);e.exports=function(e,t){var r=t||0,o=n;return[o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]]].join("")}},function(e,t,n){"use strict";n.r(t);var r=n(5),o=n.n(r),i=n(6),a=n.n(i),s=n(0),u=n.n(s),c=n(2),l=n.n(c),f=n(3),d=n.n(f),h=n(4),p=n.n(h),y=n(7),v=n.n(y);function m(e){return e||(e=0),new Promise(function(t){return setTimeout(t,e)})}function g(e){e||(e=5);for(var t="",n="abcdefghijklmnopqrstuvwxzy0123456789",r=0;r<e;r++)t+=n.charAt(Math.floor(Math.random()*n.length));return t}var w=0,b=0;function k(){var e=(new Date).getTime();return e===w?1e3*e+ ++b:(w=e,b=0,1e3*e)}var x=n(1),_=n.n(x);var S={create:function(e){var t={messagesCallback:null,bc:new BroadcastChannel(e),subFns:[]};return t.bc.onmessage=function(e){t.messagesCallback&&t.messagesCallback(e.data)},t},close:function(e){e.bc.close(),e.subFns=[]},onMessage:function(e,t,n){e.messagesCallbackTime=n,e.messagesCallback=t},postMessage:function(e,t){e.bc.postMessage(t,!1)},canBeUsed:function(){if(_.a&&"undefined"==typeof window)return!1;if("function"==typeof BroadcastChannel){if(BroadcastChannel._pubkey)throw new Error("BroadcastChannel: Do not overwrite window.BroadcastChannel with this module, this is not a polyfill");return!0}return!1},type:"native",averageResponseTime:function(){return 100},microSeconds:k},L=function(e){this.ttl=e,this.set=new Set,this.timeMap=new Map,this.has=this.set.has.bind(this.set)};function E(){return(new Date).getTime()}L.prototype={add:function(e){this.timeMap.set(e,E()),this.set.add(e),function(e){var t=E()-e.ttl,n=e.set[Symbol.iterator]();for(;;){var r=n.next().value;if(!r)return;var o=e.timeMap.get(r);if(!(o<t))return;e.timeMap.delete(r),e.set.delete(r)}}(this)},clear:function(){this.set.clear(),this.timeMap.clear()}};var P=L;function M(e){return e||(e={}),void 0===(e=JSON.parse(JSON.stringify(e))).webWorkerSupport&&(e.webWorkerSupport=!0),e.idb||(e.idb={}),e.idb.ttl||(e.idb.ttl=45e3),e.idb.fallbackInterval||(e.idb.fallbackInterval=150),e.localstorage||(e.localstorage={}),e.localstorage.removeTimeout||(e.localstorage.removeTimeout=6e4),e.node||(e.node={}),e.node.ttl||(e.node.ttl=12e4),void 0===e.node.useFastPath&&(e.node.useFastPath=!0),e}var C="pubkey.broadcast-channel-0-",I="messages";function F(){return"undefined"!=typeof indexedDB?indexedDB:void 0!==window.mozIndexedDB?window.mozIndexedDB:void 0!==window.webkitIndexedDB?window.webkitIndexedDB:void 0!==window.msIndexedDB&&window.msIndexedDB}function B(e,t){return function(e,t){var n=(new Date).getTime()-t,r=e.transaction(I).objectStore(I),o=[];return new Promise(function(e){r.openCursor().onsuccess=function(t){var r=t.target.result;if(r){var i=r.value;if(!(i.time<n))return void e(o);o.push(i),r.continue()}else e(o)}})}(e,t).then(function(t){return Promise.all(t.map(function(t){return function(e,t){var n=e.transaction([I],"readwrite").objectStore(I).delete(t);return new Promise(function(e){n.onsuccess=function(){return e()}})}(e,t.id)}))})}function j(e){return e.closed?Promise.resolve():e.messagesCallback?(t=e.db,n=e.lastCursorId,r=t.transaction(I).objectStore(I),o=[],i=IDBKeyRange.bound(n+1,1/0),new Promise(function(e){r.openCursor(i).onsuccess=function(t){var n=t.target.result;n?(o.push(n.value),n.continue()):e(o)}})).then(function(t){return t.map(function(t){return t.id>e.lastCursorId&&(e.lastCursorId=t.id),t}).filter(function(t){return function(e,t){return!(e.uuid===t.uuid||t.eMIs.has(e.id)||e.data.time<t.messagesCallbackTime)}(t,e)}).sort(function(e,t){return e.time-t.time}).forEach(function(t){e.messagesCallback&&(e.eMIs.add(t.id),e.messagesCallback(t.data))}),Promise.resolve()}):Promise.resolve();var t,n,r,o,i}var N="pubkey.broadcastChannel-";function O(e){return N+e}function T(){return!_.a&&!!function(){var e;if("undefined"==typeof window)return null;try{e=window.localStorage,e=window["ie8-eventlistener/storage"]||window.localStorage}catch(t){}return e}()}var z=[S,{create:function(e,t){return t=M(t),function(e){var t=F(),n=C+e,r=t.open(n,1);return r.onupgradeneeded=function(e){e.target.result.createObjectStore(I,{keyPath:"id",autoIncrement:!0})},new Promise(function(e,t){r.onerror=function(e){return t(e)},r.onsuccess=function(){e(r.result)}})}(e).then(function(n){var r={closed:!1,lastCursorId:0,channelName:e,options:t,uuid:g(10),eMIs:new P(2*t.idb.ttl),writeBlockPromise:Promise.resolve(),messagesCallback:null,readQueuePromises:[],db:n};return function e(t){if(!t.closed)return j(t).then(function(){return m(t.options.idb.fallbackInterval)}).then(function(){return e(t)})}(r),r})},close:function(e){e.closed=!0,e.db.close()},onMessage:function(e,t,n){e.messagesCallbackTime=n,e.messagesCallback=t,j(e)},postMessage:function(e,t){return e.writeBlockPromise=e.writeBlockPromise.then(function(){return function(e,t,n){var r={uuid:t,time:(new Date).getTime(),data:n},o=e.transaction([I],"readwrite");return new Promise(function(e,t){o.oncomplete=function(){return e()},o.onerror=function(e){return t(e)},o.objectStore(I).add(r)})}(e.db,e.uuid,t)}).then(function(){var t,n;0===(t=0,n=10,Math.floor(Math.random()*(n-t+1)+t))&&B(e.db,e.options.idb.ttl)}),e.writeBlockPromise},canBeUsed:function(){return!_.a&&!!F()},type:"idb",averageResponseTime:function(e){return 2*e.idb.fallbackInterval},microSeconds:k},{create:function(e,t){if(t=M(t),!T())throw new Error("BroadcastChannel: localstorage cannot be used");var n=g(10),r=new P(t.localstorage.removeTimeout),o={channelName:e,uuid:n,eMIs:r};return o.listener=function(e,t){var n=O(e),r=function(e){e.key===n&&t(JSON.parse(e.newValue))};return window.addEventListener("storage",r),r}(e,function(e){o.messagesCallback&&e.uuid!==n&&e.token&&!r.has(e.token)&&(e.data.time&&e.data.time<o.messagesCallbackTime||(r.add(e.token),o.messagesCallback(e.data)))}),o},close:function(e){var t;t=e.listener,window.removeEventListener("storage",t)},onMessage:function(e,t,n){e.messagesCallbackTime=n,e.messagesCallback=t},postMessage:function(e,t){return new Promise(function(n){m().then(function(){var r=O(e.channelName),o={token:g(10),time:(new Date).getTime(),data:t,uuid:e.uuid},i=JSON.stringify(o);localStorage.setItem(r,i);var a=document.createEvent("Event");a.initEvent("storage",!0,!0),a.key=r,a.newValue=i,window.dispatchEvent(a),n()})})},canBeUsed:T,type:"localstorage",averageResponseTime:function(){return 120},microSeconds:k}];if(_.a){var R=n(14);"function"==typeof R.canBeUsed&&z.push(R)}function D(e){if(e.type){var t=z.find(function(t){return t.type===e.type});if(t)return t;throw new Error("method-type "+e.type+" not found")}var n=z;e.webWorkerSupport||_.a||(n=z.filter(function(e){return"idb"!==e.type}));var r=n.find(function(e){return e.canBeUsed()});if(r)return r;throw new Error("No useable methode found:"+JSON.stringify(z.map(function(e){return e.type})))}var U=function(e,t){var n,r,o;this.name=e,this.options=M(t),this.method=D(this.options),this._iL=!1,this._onML=null,this._addEL={message:[],internal:[]},this._befC=[],this._prepP=null,r=(n=this).method.create(n.name,n.options),(o=r)&&"function"==typeof o.then?(n._prepP=r,r.then(function(e){n._state=e})):n._state=r};function V(e,t,n){var r={time:e.method.microSeconds(),type:t,data:n};return(e._prepP?e._prepP:Promise.resolve()).then(function(){return e.method.postMessage(e._state,r)})}function A(e){return e._addEL.message.length>0||e._addEL.internal.length>0}function G(e,t,n){e._addEL[t].push(n),function(e){if(!e._iL&&A(e)){var t=function(t){e._addEL[t.type].forEach(function(e){t.time>=e.time&&e.fn(t.data)})},n=e.method.microSeconds();e._prepP?e._prepP.then(function(){e._iL=!0,e.method.onMessage(e._state,t,n)}):(e._iL=!0,e.method.onMessage(e._state,t,n))}}(e)}function q(e,t,n){e._addEL[t]=e._addEL[t].filter(function(e){return e!==n}),function(e){if(e._iL&&!A(e)){e._iL=!1;var t=e.method.microSeconds();e.method.onMessage(e._state,null,t)}}(e)}U._pubkey=!0,U.clearNodeFolder=function(e){var t=D(e=M(e));return"node"===t.type?t.clearNodeFolder().then(function(){return!0}):Promise.resolve(!1)},U.prototype={postMessage:function(e){if(this.closed)throw new Error("BroadcastChannel.postMessage(): Cannot post message after channel has closed");return V(this,"message",e)},postInternal:function(e){return V(this,"internal",e)},set onmessage(e){var t={time:this.method.microSeconds(),fn:e};q(this,"message",this._onML),e&&"function"==typeof e?(this._onML=t,G(this,"message",t)):this._onML=null},addEventListener:function(e,t){G(this,e,{time:this.method.microSeconds(),fn:t})},removeEventListener:function(e,t){q(this,e,this._addEL[e].find(function(e){return e.fn===t}))},close:function(){var e=this;if(!this.closed){this.closed=!0;var t=this._prepP?this._prepP:Promise.resolve();return this._onML=null,this._addEL.message=[],t.then(function(){return Promise.all(e._befC.map(function(e){return e()}))}).then(function(){return e.method.close(e._state)})}},get type(){return this.method.type}};var W=U,J=n(8),K=n.n(J),Y=new(function(){function e(){d()(this,e),this.setVerbosity("WARNING")}return p()(e,[{key:"debug",value:function(){var e;this.checkVerbosity(4)&&(e=console).log.apply(e,arguments)}},{key:"log",value:function(){var e;this.checkVerbosity(4)&&(e=console).log.apply(e,arguments)}},{key:"info",value:function(){var e;this.checkVerbosity(3)&&(e=console).info.apply(e,arguments)}},{key:"warn",value:function(){var e;this.checkVerbosity(2)&&(e=console).warn.apply(e,arguments)}},{key:"error",value:function(){var e;this.checkVerbosity(1)&&(e=console).error.apply(e,arguments)}},{key:"setVerbosity",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info";void 0===e&&(e=t),"string"==typeof e&&(e={ERROR:1,WARNING:2,INFO:3,LOG:4,DEBUG:4}[e.toUpperCase()]||2),this.level=e}},{key:"checkVerbosity",value:function(e){return this.level>=e}}]),e}()),Q=function(e){return new Promise(function(t){return setTimeout(t,e)})},H=function(){function e(t){var n=this;d()(this,e),Y.setVerbosity(t.jsLogVerbosityLevel),this.worker=new v.a,this.worker.onmessage=function(e){n.onResponse(e.data)},this.query_id=0,this.query_callbacks=new Map,"onUpdate"in t&&(this.onUpdate=t.onUpdate,delete t.onUpdate),t.instanceName=t.instanceName||"tdlib",this.fileManager=new Z(t.instanceName,this),this.worker.postMessage({"@type":"init",options:t}),this.closeOtherClients(t)}return p()(e,[{key:"send",value:function(e){return this.doSend(e,!0)}},{key:"sendInternal",value:function(e){return this.doSend(e,!1)}},{key:"doSend",value:function(e,t){var n=this;this.query_id++,e["@extra"]?e["@extra"]={"@old_extra":JSON.parse(JSON.stringify(e["@extra"])),query_id:this.query_id}:e["@extra"]={query_id:this.query_id},"setJsLogVerbosityLevel"===e["@type"]&&Y.setVerbosity(e.new_verbosity_level),Y.debug("send to worker: ",e);var r=new Promise(function(e,t){n.query_callbacks.set(n.query_id,[e,t])});return t?this.externalPostMessage(e):this.worker.postMessage(e),r}},{key:"externalPostMessage",value:function(e){["getStorageStatistics","getStorageStatisticsFast","optimizeStorage","addProxy","init","start"].includes(e["@type"])?this.onResponse({"@type":"error","@extra":e["@extra"],code:400,message:"Method '"+e["@type"]+"' is not supported"}):"readFile"!==e["@type"]&&"readFilePart"!==e["@type"]?"deleteFile"!==e["@type"]?this.worker.postMessage(e):this.deleteFile(e):this.readFile(e)}},{key:"readFile",value:function(){var e=l()(u.a.mark(function e(t){var n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fileManager.readFile(t);case 2:n=e.sent,this.onResponse(n);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"deleteFile",value:function(){var e=l()(u.a.mark(function e(t){var n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.fileManager.deleteFile(t),e.prev=1,!n.idb_key){e.next=6;break}return e.next=5,this.sendInternal({"@type":"deleteIdbKey",idb_key:n.idb_key});case 5:delete n.idb_key;case 6:return e.next=8,this.sendInternal({"@type":"deleteFile",file_id:t.file_id});case 8:e.next=12;break;case 10:e.prev=10,e.t0=e.catch(1);case 12:this.onResponse(n);case 13:case"end":return e.stop()}},e,this,[[1,10]])}));return function(t){return e.apply(this,arguments)}}()},{key:"onResponse",value:function(e){if(Y.debug("receive from worker: ",JSON.parse(JSON.stringify(e,function(e,t){if("arr"!==e)return t}))),"@extra"in(e=this.prepareResponse(e))){var t=e["@extra"].query_id,n=this.query_callbacks.get(t),r=a()(n,2),o=r[0],i=r[1];this.query_callbacks.delete(t),"@old_extra"in e["@extra"]&&(e["@extra"]=e["@extra"]["@old_extra"]),o&&("error"===e["@type"]?i(e):o(e))}else{if("inited"===e["@type"])return void this.onInited();if("fsInited"===e["@type"])return void this.onFsInited();"updateAuthorizationState"===e["@type"]&&"authorizationStateClosed"===e.authorization_state["@type"]&&this.onClosed(),this.onUpdate(e)}}},{key:"prepareFile",value:function(e){return this.fileManager.registerFile(e)}},{key:"prepareResponse",value:function(e){if("file"===e["@type"])return this.prepareFile(e);for(var t in e){var n=e[t];n&&"object"===o()(n)&&(e[t]=this.prepareResponse(n))}return e}},{key:"onBroadcastMessage",value:function(e){var t=e;if(t.uid!==this.uid){if(Y.info("got broadcast message: ",t),t.isBackground&&!this.isBackground);else if(!t.isBackground&&this.isBackground||t.timestamp>this.timestamp)return void this.close();"closed"===t.state?(this.waitSet.delete(t.uid),0===this.waitSet.size&&(Y.info("onWaitSetEmpty"),this.onWaitSetEmpty(),this.onWaitSetEmpty=function(){})):(this.waitSet.add(t.uid),"closing"!==t.state&&this.postState())}else Y.info("ignore self broadcast message: ",t)}},{key:"postState",value:function(){var e={uid:this.uid,state:this.state,timestamp:this.timestamp,isBackground:this.isBackground};Y.info("Post state: ",e),this.channel.postMessage(e)}},{key:"onWaitSetEmpty",value:function(){}},{key:"onFsInited",value:function(){this.fileManager.init()}},{key:"onInited",value:function(){this.isInited=!0,this.doSendStart()}},{key:"sendStart",value:function(){this.wantSendStart=!0,this.doSendStart()}},{key:"doSendStart",value:function(){if(this.isInited&&this.wantSendStart&&"start"===this.state){this.wantSendStart=!1,this.state="active";var e={"@type":"start"};Y.info("send to worker: ",e),this.worker.postMessage(e)}}},{key:"onClosed",value:function(){this.isClosing=!0,this.worker.terminate(),Y.info("worker is terminated"),this.state="closed",this.postState()}},{key:"close",value:function(){if(!this.isClosing){if(this.isClosing=!0,Y.info("close state: ",this.state),"start"===this.state)return this.onClosed(),void this.onUpdate({"@type":"updateAuthorizationState",authorization_state:{"@type":"authorizationStateClosed"}});var e={"@type":"close"};Y.info("send to worker: ",e),this.worker.postMessage(e),this.state="closing",this.postState()}}},{key:"closeOtherClients",value:function(){var e=l()(u.a.mark(function e(t){var n=this;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.uid=K()(),this.state="start",this.isBackground=!!t.isBackground,this.timestamp=Date.now(),this.waitSet=new Set,Y.info("close other clients"),this.channel=new W(t.instanceName,{webWorkerSupport:!1}),this.postState(),this.channel.onmessage=function(e){n.onBroadcastMessage(e)},e.next=11,Q(300);case 11:if(0===this.waitSet.size){e.next=14;break}return e.next=14,new Promise(function(e){n.onWaitSetEmpty=e});case 14:this.sendStart();case 15:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"onUpdate",value:function(e){Y.info("ignore onUpdate")}}]),e}(),X=function(){function e(t){d()(this,e),this.value=t,this.clear()}return p()(e,[{key:"erase",value:function(){this.prev.connect(this.next),this.clear()}},{key:"clear",value:function(){this.prev=this,this.next=this}},{key:"connect",value:function(e){this.next=e,e.prev=this}},{key:"onUsed",value:function(e){e.usedAt=Date.now(),e.erase(),e.connect(this.next),Y.debug("LRU: used file_id: ",e.value),this.connect(e)}},{key:"getLru",value:function(){if(this===this.next)throw new Error("popLru from empty list");return this.prev}}]),e}(),Z=function(){function e(t,n){d()(this,e),this.instanceName=t,this.cache=new Map,this.pending=[],this.transaction_id=0,this.totalSize=0,this.lru=new X(-1),this.client=n}return p()(e,[{key:"init",value:function(){var e=this;this.idb=new Promise(function(t,n){var r=window.indexedDB.open(e.instanceName);r.onsuccess=function(){return t(r.result)},r.onerror=function(){return n(r.error)}}),this.isInited=!0}},{key:"unload",value:function(e){e.arr&&(Y.debug("LRU: delete file_id: ",e.node.value," with arr.length: ",e.arr.length),this.totalSize-=e.arr.length,delete e.arr),e.node&&(e.node.erase(),delete e.node)}},{key:"registerFile",value:function(e){e.idb_key||e.arr?e.local.is_downloading_completed=!0:e.local.is_downloading_completed=!1;var t={},n=this.cache.get(e.id);if(n?t=n:this.cache.set(e.id,t),e.idb_key?(t.idb_key=e.idb_key,delete e.idb_key):delete t.idb_key,e.arr){for(var r=Date.now();this.totalSize>1e8;){var o=this.lru.getLru();if(o.usedAt+6e4>r)break;var i=this.cache.get(o.value);this.unload(i)}t.arr&&(Y.warn("Got file.arr at least twice for the same file"),this.totalSize-=t.arr.length),t.arr=e.arr,delete e.arr,this.totalSize+=t.arr.length,t.node||(Y.debug("LRU: create file_id: ",e.id," with arr.length: ",t.arr.length),t.node=new X(e.id)),this.lru.onUsed(t.node),Y.info("Total file.arr size: ",this.totalSize)}return t.file=e,e}},{key:"flushLoad",value:function(){var e=l()(u.a.mark(function e(){var t,n,r,o,i,a,s,c,l,f;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.pending,this.pending=[],e.next=4,this.idb;case 4:for(n=e.sent,r=this.transaction_id++,o=n.transaction(["keyvaluepairs"],"readonly").objectStore("keyvaluepairs"),Y.debug("Load group of files from idb",t.length),i=!0,a=!1,s=void 0,e.prev=11,c=function(){var e=f.value,t=o.get(e.key);t.onsuccess=function(t){var n=t.target.result;n?(0===n.size&&Y.error("Got empty blob from db ",e.key),e.resolve({data:n,transaction_id:r})):e.reject()},t.onerror=function(){return e.reject(t.error)}},l=t[Symbol.iterator]();!(i=(f=l.next()).done);i=!0)c();e.next=20;break;case 16:e.prev=16,e.t0=e.catch(11),a=!0,s=e.t0;case 20:e.prev=20,e.prev=21,i||null==l.return||l.return();case 23:if(e.prev=23,!a){e.next=26;break}throw s;case 26:return e.finish(23);case 27:return e.finish(20);case 28:case"end":return e.stop()}},e,this,[[11,16,20,28],[21,,23,27]])}));return function(){return e.apply(this,arguments)}}()},{key:"load",value:function(e,t,n){var r=this;0===this.pending.length&&setTimeout(function(){r.flushLoad()},1),this.pending.push({key:e,resolve:t,reject:n})}},{key:"doLoadFull",value:function(){var e=l()(u.a.mark(function e(t){var n,r=this;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.arr){e.next=2;break}return e.abrupt("return",{data:new Blob([t.arr]),transaction_id:-1});case 2:if(!t.idb_key){e.next=7;break}return n=t.idb_key,e.next=6,new Promise(function(e,t){r.load(n,e,t)});case 6:return e.abrupt("return",e.sent);case 7:throw new Error("File is not loaded");case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"doLoad",value:function(){var e=l()(u.a.mark(function e(t,n,r){var o,i,a,s;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.arr||t.idb_key||!t.file.local.path){e.next=24;break}return e.prev=1,e.next=4,this.client.sendInternal({"@type":"getFileDownloadedPrefixSize",file_id:t.file.id,offset:n});case 4:if(o=e.sent,Y.error(o,r),r){e.next=10;break}r=o.count,e.next=12;break;case 10:if(!(r>o.count)){e.next=12;break}throw new Error("File not loaded yet");case 12:return e.next=14,this.client.sendInternal({"@type":"readFilePart",path:t.file.local.path,offset:n,size:r});case 14:return(i=e.sent).data=new Blob([i.data]),i.transaction_id=-2,Y.error(i),e.abrupt("return",i);case 21:e.prev=21,e.t0=e.catch(1),Y.info("readFilePart failed",t,n,r,e.t0);case 24:return e.next=26,this.doLoadFull(t);case 26:return a=e.sent,s=a.data.size,r||(r=s),n>s&&(n=s),a.data=a.data.slice(n,n+r),e.abrupt("return",a);case 32:case"end":return e.stop()}},e,this,[[1,21]])}));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"doDelete",value:function(e){return this.unload(e),e.idb_key}},{key:"readFile",value:function(){var e=l()(u.a.mark(function e(t){var n,r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.isInited){e.next=3;break}throw new Error("FileManager is not inited");case 3:if(n=this.cache.get(t.file_id)){e.next=6;break}throw new Error("File is not loaded");case 6:return n.node&&this.lru.onUsed(n.node),t.offset=t.offset||0,t.size=t.size||0,e.next=11,this.doLoad(n,t.offset,t.size);case 11:return r=e.sent,e.abrupt("return",{"@type":"filePart","@extra":t["@extra"],data:r.data,transaction_id:r.transaction_id});case 15:return e.prev=15,e.t0=e.catch(0),e.abrupt("return",{"@type":"error","@extra":t["@extra"],code:400,message:e.t0});case 18:case"end":return e.stop()}},e,this,[[0,15]])}));return function(t){return e.apply(this,arguments)}}()},{key:"deleteFile",value:function(e){var t={"@type":"ok","@extra":e["@extra"]};try{if(!this.isInited)throw new Error("FileManager is not inited");var n=this.cache.get(e.file_id);if(!n)throw new Error("File is not loaded");var r=this.doDelete(n);r&&(t.idb_key=r)}catch(o){}return t}}]),e}();t.default=H}])});
},{}],"WLFi":[function(require,module,exports) {
"use strict";function n(){var n=window.navigator.userAgent;return-1!=n.indexOf("Windows NT 10.0")?"Windows 10":-1!=n.indexOf("Windows NT 6.2")?"Windows 8":-1!=n.indexOf("Windows NT 6.1")?"Windows 7":-1!=n.indexOf("Windows NT 6.0")?"Windows Vista":-1!=n.indexOf("Windows NT 5.1")?"Windows XP":-1!=n.indexOf("Windows NT 5.0")?"Windows 2000":-1!=n.indexOf("Mac")?"Mac/iOS":-1!=n.indexOf("X11")?"UNIX":-1!=n.indexOf("Linux")?"Linux":"Unknown"}function e(){var n=!!window.StyleMedia;return-1==navigator.userAgent.indexOf("Chrome")||n?-1==navigator.userAgent.indexOf("Safari")||n?-1!=navigator.userAgent.indexOf("Firefox")?"Firefox":-1!=navigator.userAgent.indexOf("MSIE")?"IE":n?"Edge":"Unknown":"Safari":"Chrome"}Object.defineProperty(exports,"__esModule",{value:!0}),exports.getOsName=n,exports.getBrowser=e;
},{}],"FQHI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=l,exports.sendParameters=c,exports.send=f;var e=r(require("tdweb/dist/tdweb")),t=require("./utils");function r(e){return e&&e.__esModule?e:{default:e}}var n,a=function(){return(a=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},o=function(e,t,r,n){return new(r||(r=Promise))(function(a,o){function s(e){try{u(n.next(e))}catch(t){o(t)}}function i(e){try{u(n.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(s,i)}u((n=n.apply(e,t||[])).next())})},s=function(e,t){var r,n,a,o,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(a=2&o[0]?n.return:o[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,o[1])).done)return a;switch(n=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(a=(a=s.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){s.label=o[1];break}if(6===o[0]&&s.label<a[1]){s.label=a[1],a=o;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(o);break}a[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(i){o=[6,i],n=0}finally{r=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}},i={logVerbosityLevel:1,jsLogVerbosityLevel:3,mode:"wasm",prefix:"tdlib",readOnly:!1,isBackground:!1,useDatabase:!1},u={"@type":"tdParameters",use_test_dc:!1,system_language_code:navigator.language||"en",device_model:(0,t.getBrowser)(),system_version:(0,t.getOsName)(),application_version:"0.0.1",use_secret_chats:!1,use_message_database:!0,use_file_database:!1,database_directory:"/db",files_directory:"/"};function l(t){console.log("[TdLib] INIT"),(n=new e.default(i)).onUpdate=t}function c(){var e="661b8a96784343f591c569e5e672bf4f";f({"@type":"setTdlibParameters",parameters:a(a({},u),{api_id:"1013344",api_hash:e})})}function f(e){return o(this,void 0,void 0,function(){var t,r;return s(this,function(a){switch(a.label){case 0:console.log("[TdLib] SEND",e),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,n.send(e)];case 2:return t=a.sent(),console.log("[TdLib] RECEIVE",t),[2,t];case 3:return r=a.sent(),console.error("[TdLib] ERROR",r),[3,4];case 4:return[2]}})})}
},{"tdweb/dist/tdweb":"byz7","./utils":"WLFi"}],"SyI4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.onUpdate=o;var t=require("../../lib/teactn"),e=r(require("../../api/tdlib"));function a(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return a=function(){return t},t}function r(t){if(t&&t.__esModule)return t;var e=a();if(e&&e.has(t))return e.get(t);var r={};if(null!=t){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var i=n?Object.getOwnPropertyDescriptor(t,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=t[o]}}return r.default=t,e&&e.set(t,r),r}var n=function(){return(n=Object.assign||function(t){for(var e,a=1,r=arguments.length;a<r;a++)for(var n in e=arguments[a])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};function o(t){switch(t["@type"]){case"updateAuthorizationState":i(t)}}function i(a){switch((0,t.setGlobal)(n(n({},(0,t.getGlobal)()),{authState:a.authorization_state["@type"]})),a.authorization_state["@type"]){case"authorizationStateLoggingOut":(0,t.setGlobal)(n(n({},(0,t.getGlobal)()),{isLoggingOut:!0}));break;case"authorizationStateWaitTdlibParameters":e.sendParameters();break;case"authorizationStateWaitEncryptionKey":e.send({"@type":"checkDatabaseEncryptionKey"});break;case"authorizationStateWaitPhoneNumber":case"authorizationStateWaitCode":case"authorizationStateWaitPassword":break;case"authorizationStateWaitRegistration":e.send({"@type":"registerUser",first_name:"Tester",last_name:"Account"});break;case"authorizationStateReady":(0,t.setGlobal)(n(n({},(0,t.getGlobal)()),{isLoggingOut:!1}));break;case"authorizationStateClosing":break;case"authorizationStateClosed":(0,t.getGlobal)().isLoggingOut?document.title+=": Zzz…":e.init(o)}}(0,t.addReducer)("setAuthPhoneNumber",function(t,a,r){var n=r.phoneNumber;e.send({"@type":"setAuthenticationPhoneNumber",phone_number:n})}),(0,t.addReducer)("setAuthCode",function(t,a,r){var n=r.code;e.send({"@type":"checkAuthenticationCode",code:n})}),(0,t.addReducer)("signOut",function(){e.send({"@type":"logOut"})});
},{"../../lib/teactn":"g4k8","../../api/tdlib":"FQHI"}],"RqJJ":[function(require,module,exports) {
var global = arguments[3];
var t=arguments[3];Object.defineProperty(exports,"__esModule",{value:!0}),exports.onUpdate=c;var e=require("../../lib/teactn"),r=a(require("../../api/tdlib"));function n(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return n=function(){return t},t}function a(t){if(t&&t.__esModule)return t;var e=n();if(e&&e.has(t))return e.get(t);var r={};if(null!=t){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var i=a?Object.getOwnPropertyDescriptor(t,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=t[o]}}return r.default=t,e&&e.set(t,r),r}var o=function(){return(o=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var a in e=arguments[r])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)},i=function(t,e,r,n){return new(r||(r=Promise))(function(a,o){function i(t){try{c(n.next(t))}catch(e){o(e)}}function u(t){try{c(n.throw(t))}catch(e){o(e)}}function c(t){var e;t.done?a(t.value):(e=t.value,e instanceof r?e:new r(function(t){t(e)})).then(i,u)}c((n=n.apply(t,e||[])).next())})},u=function(t,e){var r,n,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(a=2&o[0]?n.return:o[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,o[1])).done)return a;switch(n=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,n=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=e.call(t,i)}catch(u){o=[6,u],n=0}finally{r=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}};function c(t){var r;switch(t["@type"]){case"updateNewChat":((0,e.getGlobal)().chats||{}).byId;var n=(0,e.getGlobal)();(0,e.setGlobal)(o(o({},n),{chats:o(o({},n.chats),{byId:o(o({},n.chats.byId),(r={},r[t.chat.id]=t.chat,r))})}))}}function l(){return i(this,void 0,void 0,function(){return u(this,function(t){switch(t.label){case 0:return"9223372036854775807",0,[4,r.send({"@type":"getChats",offset_chat_id:0,offset_order:"9223372036854775807",limit:25})];case 1:return t.sent(),[2]}})})}function s(t){return i(this,void 0,void 0,function(){return u(this,function(t){return[2]})})}(0,e.addReducer)("loadChats",function(){l()}),(0,e.addReducer)("selectChat",function(t,e,r){var n=r.id;return s(n),o(o({},t),{chats:o(o({},t.chats),{selectedId:n})})});
},{"../../lib/teactn":"g4k8","../../api/tdlib":"FQHI"}],"Ljop":[function(require,module,exports) {
var global = arguments[3];
var e=arguments[3];Object.defineProperty(exports,"__esModule",{value:!0}),exports.onUpdate=l;var t=require("../../lib/teactn"),r=a(require("../../api/tdlib"));function n(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return n=function(){return e},e}function a(e){if(e&&e.__esModule)return e;var t=n();if(t&&t.has(e))return t.get(e);var r={};if(null!=e){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}}return r.default=e,t&&t.set(e,r),r}var o=function(){return(o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},i=function(e,t,r,n){return new(r||(r=Promise))(function(a,o){function i(e){try{s(n.next(e))}catch(t){o(t)}}function u(e){try{s(n.throw(e))}catch(t){o(t)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,u)}s((n=n.apply(e,t||[])).next())})},u=function(e,t){var r,n,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(a=2&o[0]?n.return:o[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,o[1])).done)return a;switch(n=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,n=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(u){o=[6,u],n=0}finally{r=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}},s=function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),a=0;for(t=0;t<r;t++)for(var o=arguments[t],i=0,u=o.length;i<u;i++,a++)n[a]=o[i];return n},c=20;function l(e){}function f(e,t){return void 0===t&&(t=0),i(this,void 0,void 0,function(){var r;return u(this,function(n){switch(n.label){case 0:return[4,p(e,t)];case 1:return r=n.sent(),!t&&r&&r.length?[4,p(e,r[0].id)]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}})})}function p(e,n){return void 0===n&&(n=0),i(this,void 0,void 0,function(){var a,i,l,f;return u(this,function(u){switch(u.label){case 0:return[4,r.send({"@type":"getChatHistory",chat_id:e,from_message_id:n,offset:0,limit:c})];case 1:return(a=u.sent())?(i=a.messages,l=(0,t.getGlobal)(),(0,t.setGlobal)(o(o({},l),{messages:o(o({},l.messages),{byChatId:o(o({},l.messages.byChatId),(f={},f[e]=s(l.messages.byChatId[e]||[],i),f))})})),[2,i]):[2]}})})}(0,t.addReducer)("loadChatMessages",function(e,t,r){var n=r;f(n.chatId,n.fromMessageId)});
},{"../../lib/teactn":"g4k8","../../api/tdlib":"FQHI"}],"fgrf":[function(require,module,exports) {
var global = arguments[3];
var e=arguments[3],r=require("../../lib/teactn"),t=u(require("../../api/tdlib")),n=u(require("./system")),i=u(require("./chats")),a=u(require("./messages"));function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function u(e){if(e&&e.__esModule)return e;var r=o();if(r&&r.has(e))return r.get(e);var t={};if(null!=e){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=n?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(t,i,a):t[i]=e[i]}}return t.default=e,r&&r.set(e,t),t}var c=function(){return(c=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++)for(var i in r=arguments[t])Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i]);return e}).apply(this,arguments)};function p(e){console.log("[TdLib] UPDATE",e["@type"],{update:e}),n.onUpdate(e),i.onUpdate(e),a.onUpdate(e)}(0,r.addReducer)("init",function(e){return t.init(p),c(c({},e),{isInitialized:!0})});
},{"../../lib/teactn":"g4k8","../../api/tdlib":"FQHI","./system":"SyI4","./chats":"RqJJ","./messages":"Ljop"}],"mmoF":[function(require,module,exports) {
var global = arguments[3];
var r=arguments[3],e=require("../lib/teactn"),t=function(){return(t=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++)for(var u in e=arguments[t])Object.prototype.hasOwnProperty.call(e,u)&&(r[u]=e[u]);return r}).apply(this,arguments)};(0,e.addReducer)("setAuthPhoneNumber",function(r,e,n){var u=n.phoneNumber;return t(t({},r),{authPhoneNumber:u})});
},{"../lib/teactn":"g4k8"}],"omRF":[function(require,module,exports) {
"use strict";require("./tdlib"),require("./auth");
},{"./tdlib":"fgrf","./auth":"mmoF"}],"Mqd8":[function(require,module,exports) {

},{}],"SqZv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("../../lib/teact"));function t(e){return e&&e.__esModule?e:{default:e}}require("./Loading.scss");var r=function(){return e.default.createElement("div",{className:"Loading"},"Loading...")},a=r;exports.default=a;
},{"../../lib/teact":"Qheb","./Loading.scss":"Mqd8"}],"fBR4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("../../lib/teact"));function t(e){return e&&e.__esModule?e:{default:e}}require("./Button.scss");var r=function(t){var r=t.onClick,u=t.children;return e.default.createElement("button",{className:"Button",onClick:r},u)},u=r;exports.default=u;
},{"../../lib/teact":"Qheb","./Button.scss":"Mqd8"}],"Owjs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("../../lib/teact"));function t(e){return e&&e.__esModule?e:{default:e}}require("./InputText.scss");var r=function(t){var r=t.id,u=t.onChange,a=t.placeholder;return e.default.createElement("input",{className:"InputText",type:"text",id:r,onChange:u,placeholder:a})},u=r;exports.default=u;
},{"../../lib/teact":"Qheb","./InputText.scss":"Mqd8"}],"Mh09":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("../../lib/teact"));function t(e){return e&&e.__esModule?e:{default:e}}require("./Select.scss");var r=function(t){var r=t.onChange,a=t.id,n=t.name,l=t.children;return e.default.createElement("select",{className:"Select",id:a,name:n,onChange:r},l)},a=r;exports.default=a;
},{"../../lib/teact":"Qheb","./Select.scss":"Mqd8"}],"D19Y":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=o(require("../../../lib/teact")),t=require("../../../lib/teactn"),n=l(require("../../../components/ui/Button")),r=l(require("../../../components/ui/InputText")),u=l(require("../../../components/ui/Select"));function l(e){return e&&e.__esModule?e:{default:e}}function a(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}function o(e){if(e&&e.__esModule)return e;var t=a();if(t&&t.has(e))return t.get(e);var n={};if(null!=e){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var l=r?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(n,u,l):n[u]=e[u]}}return n.default=e,t&&t.set(e,n),n}require("./AuthPhoneNumber.scss");var i=function(t){var l=t.setAuthPhoneNumber,a=(0,e.useState)(!1),o=a[0],i=a[1];return e.default.createElement("div",{id:"auth-phone-number-form"},e.default.createElement("div",{id:"logo"}),e.default.createElement("h2",null,"Sign in to Telegram"),e.default.createElement("div",{className:"note"},"Please confirm your country and",e.default.createElement("br",null),"enter phone number."),e.default.createElement("div",null,e.default.createElement(u.default,{id:"sign-in-phone-code"},e.default.createElement("option",{value:"+7"},"Russia +7"))),e.default.createElement("div",null,e.default.createElement(r.default,{id:"sign-in-phone-number",placeholder:"Phone Number",onChange:function(e){var t=e.target;t.value=t.value.replace(/[^\d]+/g,""),i(10===t.value.length)}})),e.default.createElement("div",null,o&&e.default.createElement(n.default,{onClick:function(){var e=document.getElementById("sign-in-phone-code"),t=document.getElementById("sign-in-phone-number"),n=""+e.value+t.value;l({phoneNumber:n})}},"NEXT")))},c=(0,t.withGlobal)(void 0,function(e,t){return{setAuthPhoneNumber:t.setAuthPhoneNumber}})(i);exports.default=c;
},{"../../../lib/teact":"Qheb","../../../lib/teactn":"g4k8","../../../components/ui/Button":"fBR4","../../../components/ui/InputText":"Owjs","../../../components/ui/Select":"Mh09","./AuthPhoneNumber.scss":"Mqd8"}],"TtWs":[function(require,module,exports) {
var global = arguments[3];
var e=arguments[3];Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=o(require("../../../lib/teact")),r=require("../../../lib/teactn"),n=a(require("../../../components/ui/Button")),u=a(require("../../../components/ui/InputText"));function a(e){return e&&e.__esModule?e:{default:e}}function l(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return l=function(){return e},e}function o(e){if(e&&e.__esModule)return e;var t=l();if(t&&t.has(e))return t.get(e);var r={};if(null!=e){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var a=n?Object.getOwnPropertyDescriptor(e,u):null;a&&(a.get||a.set)?Object.defineProperty(r,u,a):r[u]=e[u]}}return r.default=e,t&&t.set(e,r),r}require("./AuthCode.scss");var i=function(e){var r=e.authPhoneNumber,a=e.setAuthCode,l=(0,t.useState)(!1),o=l[0],i=l[1];return t.default.createElement("div",{id:"auth-code-form"},t.default.createElement("div",{id:"monkey"}),t.default.createElement("h2",null,r),t.default.createElement("div",{className:"note"},"We have sent you an SMS",t.default.createElement("br",null),"with the code."),t.default.createElement("div",null,t.default.createElement(u.default,{id:"sign-in-code",placeholder:"Code",onChange:function(e){var t=e.target;t.value=t.value.replace(/[^\d]+/,""),i(5===t.value.length)}})),t.default.createElement("div",null,o&&t.default.createElement(n.default,{onClick:function(){var e=document.getElementById("sign-in-code").value;a({code:e})}},"NEXT")))},d=(0,r.withGlobal)(function(e){return{authPhoneNumber:e.authPhoneNumber}},function(e,t){return{setAuthCode:t.setAuthCode}})(i);exports.default=d;
},{"../../../lib/teact":"Qheb","../../../lib/teactn":"g4k8","../../../components/ui/Button":"fBR4","../../../components/ui/InputText":"Owjs","./AuthCode.scss":"Mqd8"}],"ORTp":[function(require,module,exports) {
var global = arguments[3];
var e=arguments[3];Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=n(require("../../lib/teact")),a=require("../../lib/teactn"),u=n(require("./components/AuthPhoneNumber")),r=n(require("./components/AuthCode"));function n(e){return e&&e.__esModule?e:{default:e}}var o=function(e){switch(e.authState){case"authorizationStateWaitCode":return t.default.createElement(r.default,null);case"authorizationStateWaitPassword":return t.default.createElement("div",null,"NO PASSWORD SUPPORT");case"authorizationStateWaitPhoneNumber":default:return t.default.createElement(u.default,null)}},l=(0,a.withGlobal)(function(e){return{authState:e.authState}})(o);exports.default=l;
},{"../../lib/teact":"Qheb","../../lib/teactn":"g4k8","./components/AuthPhoneNumber":"D19Y","./components/AuthCode":"TtWs"}],"eYfr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("../lib/teact"));function t(e){return e&&e.__esModule?e:{default:e}}require("./Avatar.scss");var r=function(t){var r=t.size,i=void 0===r?"large":r,s=t.chat,u=t.children;return e.default.createElement("div",{className:"Avatar size-"+i},s?a(s):u)};function a(e){return e.title.replace(/[^\W\w\s]+/,"").split(" ").map(function(e){return e[0].toUpperCase()}).slice(0,2).join("")}var i=r;exports.default=i;
},{"../lib/teact":"Qheb","./Avatar.scss":"Mqd8"}],"y1SS":[function(require,module,exports) {
var global = arguments[3];
var e=arguments[3];Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=l(require("../../../../lib/teact")),a=require("../../../../lib/teactn"),r=l(require("../../../../components/Avatar"));function l(e){return e&&e.__esModule?e:{default:e}}require("./Chat.scss");var c=function(e){var a=e.chat,l=e.isSelected,c=e.selectChat;return t.default.createElement("div",{className:"Chat "+(l?"selected":""),onClick:function(){return c({id:a.id})}},t.default.createElement(r.default,{chat:a}),t.default.createElement("div",{className:"title"},a.title))},u=(0,a.withGlobal)(function(e,t){var a=e.chats,r=t.id;return{chat:a.byId[r],isSelected:Number(r)===a.selectedId}},function(e,t){return{selectChat:t.selectChat}})(c);exports.default=u;
},{"../../../../lib/teact":"Qheb","../../../../lib/teactn":"g4k8","../../../../components/Avatar":"eYfr","./Chat.scss":"Mqd8"}],"EkA5":[function(require,module,exports) {
var global = arguments[3];
var e=arguments[3];Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=l(require("../../../../lib/teact")),a=require("../../../../lib/teactn"),r=l(require("./Chat"));function l(e){return e&&e.__esModule?e:{default:e}}require("./ChatList.scss");var u=function(e){var a=e.chats,l=e.areChatsLoaded,u=e.loadChats;return l||u(),t.default.createElement("div",{className:"ChatList"},l?t.default.createElement("div",null,Object.keys(a.byId).map(function(e){return t.default.createElement(r.default,{key:e,id:e})})):t.default.createElement("div",null,"Loading..."))},d=(0,a.withGlobal)(function(e){var t=e.chats;return{chats:t,areChatsLoaded:Object.keys(t.byId).length}},function(e,t){return{loadChats:t.loadChats}})(u);exports.default=d;
},{"../../../../lib/teact":"Qheb","../../../../lib/teactn":"g4k8","./Chat":"y1SS","./ChatList.scss":"Mqd8"}],"S4rH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("../../../../lib/teact")),t=r(require("./ChatList"));function r(e){return e&&e.__esModule?e:{default:e}}var u=function(){return e.default.createElement(t.default,null)},l=u;exports.default=l;
},{"../../../../lib/teact":"Qheb","./ChatList":"EkA5"}],"qjxn":[function(require,module,exports) {
var global = arguments[3];
var e=arguments[3];Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=l(require("../../../../lib/teact")),a=require("../../../../lib/teactn"),r=l(require("../../../../components/Avatar"));function l(e){return e&&e.__esModule?e:{default:e}}require("./MiddleHeader.scss");var d=function(e){var a=e.chat;return t.default.createElement("div",{className:"MiddleHeader"},t.default.createElement(r.default,{size:"medium",chat:a}),t.default.createElement("div",{className:"title"},a.title))},u=(0,a.withGlobal)(function(e){var t=e.chats,a=t.selectedId,r=t.byId;return{chat:a&&r[a]}})(d);exports.default=u;
},{"../../../../lib/teact":"Qheb","../../../../lib/teactn":"g4k8","../../../../components/Avatar":"eYfr","./MiddleHeader.scss":"Mqd8"}],"yFwt":[function(require,module,exports) {
var global = arguments[3];
var e=arguments[3];Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=a(require("../../../../lib/teact")),r=require("../../../../lib/teactn"),s=a(require("../../../../components/Avatar"));function a(e){return e&&e.__esModule?e:{default:e}}require("./Message.scss");var l=function(e){var r=e.message,a=e.isSelected,l=r.content.text.text;return t.default.createElement("div",{className:"Message "+(a?"selected":"")},t.default.createElement(s.default,{size:"small"},"HE"),t.default.createElement("div",{className:"text"},l))};function n(e){return e.title.replace(/[^\W\w\s]+/,"").split(" ").map(function(e){return e[0].toUpperCase()}).slice(0,2).join("")}var u=(0,r.withGlobal)(function(e,t){var r=e.messages,s=t.id;return{isSelected:Number(s)===r.selectedId}},function(e,t){return{selectMessage:t.selectMessage}})(l);exports.default=u;
},{"../../../../lib/teact":"Qheb","../../../../lib/teactn":"g4k8","../../../../components/Avatar":"eYfr","./Message.scss":"Mqd8"}],"xdvh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=function(e,t,r){return void 0===r&&(r="asc"),e.sort(function(e,o){return"asc"==r?o[t]-e[t]:e[t]-o[t]})};exports.default=e;
},{}],"z8Ux":[function(require,module,exports) {
var global = arguments[3];
var e=arguments[3];Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=d(require("../../../../lib/teact")),a=require("../../../../lib/teactn"),s=d(require("./Message")),r=d(require("../../../../util/orderBy"));function d(e){return e&&e.__esModule?e:{default:e}}require("./MessageList.scss");var l=function(e){var a=e.selectedChatId,r=e.messages,d=e.loadChatMessages;return r||d({chatId:a}),t.default.createElement("div",{className:"MessageList"},r?t.default.createElement("div",null,r.map(function(e){return t.default.createElement(s.default,{key:e.id,message:e})})):t.default.createElement("div",null,"Loading..."))},u=(0,a.withGlobal)(function(e){var t=e.chats,a=e.messages,s=t.selectedId?a.byChatId[t.selectedId]:null;return{selectedChatId:t.selectedId,messages:s&&(0,r.default)(s,"date","desc")}},function(e,t){return{loadChatMessages:t.loadChatMessages}})(l);exports.default=u;
},{"../../../../lib/teact":"Qheb","../../../../lib/teactn":"g4k8","./Message":"yFwt","../../../../util/orderBy":"xdvh","./MessageList.scss":"Mqd8"}],"fSwn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=u(require("../../../../lib/teact")),t=require("../../../../lib/teactn"),r=u(require("../../../../components/ui/InputText"));function u(e){return e&&e.__esModule?e:{default:e}}require("./MiddleFooter.scss");var a=function(t){return e.default.createElement("div",{className:"MiddleFooter"},e.default.createElement(r.default,{placeholder:"Message",onChange:l}))};function l(){}var o=(0,t.withGlobal)()(a);exports.default=o;
},{"../../../../lib/teact":"Qheb","../../../../lib/teactn":"g4k8","../../../../components/ui/InputText":"Owjs","./MiddleFooter.scss":"Mqd8"}],"LUda":[function(require,module,exports) {
var global = arguments[3];
var e=arguments[3];Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=u(require("../../../../lib/teact")),l=require("../../../../lib/teactn"),a=u(require("./MiddleHeader")),r=u(require("./MessageList")),d=u(require("./MiddleFooter"));function u(e){return e&&e.__esModule?e:{default:e}}require("./MiddleColumn.scss");var s=function(e){var l=e.selectedChatId;return t.default.createElement("div",{className:"MiddleColumn"},l?t.default.createElement("div",{className:"messages-layout"},t.default.createElement(a.default,null),t.default.createElement(r.default,null),t.default.createElement(d.default,null)):t.default.createElement("div",{className:"select-chat-note"},"Select chat to start messaging..."))},n=(0,l.withGlobal)(function(e){return{selectedChatId:e.chats.selectedId}})(s);exports.default=n;
},{"../../../../lib/teact":"Qheb","../../../../lib/teactn":"g4k8","./MiddleHeader":"qjxn","./MessageList":"z8Ux","./MiddleFooter":"fSwn","./MiddleColumn.scss":"Mqd8"}],"bnbq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("../../../../lib/teact")),t=require("../../../../lib/teactn"),u=r(require("../../../../components/ui/Button"));function r(e){return e&&e.__esModule?e:{default:e}}function n(e){confirm("Are you sure?")&&e()}require("./RightColumn.scss");var i=function(t){var r=t.signOut;return e.default.createElement("div",{className:"RightColumn"},e.default.createElement(u.default,{onClick:function(){return n(r)}},"Sign Out"))},o=(0,t.withGlobal)(void 0,function(e,t){return{signOut:t.signOut}})(i);exports.default=o;
},{"../../../../lib/teact":"Qheb","../../../../lib/teactn":"g4k8","../../../../components/ui/Button":"fBR4","./RightColumn.scss":"Mqd8"}],"Oo8G":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=n(require("../../lib/teact")),t=require("../../lib/teactn"),l=n(require("./components/left/LeftColumn")),u=n(require("./components/middle/MiddleColumn")),r=n(require("./components/right/RightColumn"));function n(e){return e&&e.__esModule?e:{default:e}}require("./Main.scss");var a=function(){return e.default.createElement("div",{className:"Main"},e.default.createElement(l.default,null),e.default.createElement(u.default,null),e.default.createElement(r.default,null))},i=(0,t.withGlobal)()(a);exports.default=i;
},{"../../lib/teact":"Qheb","../../lib/teactn":"g4k8","./components/left/LeftColumn":"S4rH","./components/middle/MiddleColumn":"LUda","./components/right/RightColumn":"bnbq","./Main.scss":"Mqd8"}],"NHn6":[function(require,module,exports) {
var global = arguments[3];
var e=arguments[3];Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=o(require("./lib/teactn"));require("./modules");var a=n(require("./pages/loading/Loading")),r=n(require("./pages/auth/Auth")),i=n(require("./pages/main/Main"));function n(e){return e&&e.__esModule?e:{default:e}}function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function o(e){if(e&&e.__esModule)return e;var t=u();if(t&&t.has(e))return t.get(e);var a={};if(null!=e){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var n=r?Object.getOwnPropertyDescriptor(e,i):null;n&&(n.get||n.set)?Object.defineProperty(a,i,n):a[i]=e[i]}}return a.default=e,t&&t.set(e,a),a}var l=function(e){var n=e.isInitialized,u=e.authState,o=e.init;if(console.log("APP RE-RENDER",u),n||o(),u)switch(u){case"authorizationStateWaitCode":case"authorizationStateWaitPassword":case"authorizationStateWaitPhoneNumber":return t.default.createElement(r.default,null);case"authorizationStateClosed":case"authorizationStateClosing":case"authorizationStateLoggingOut":case"authorizationStateReady":return t.default.createElement(i.default,null)}return t.default.createElement(a.default,null)},s=(0,t.withGlobal)(function(e){return{isInitialized:e.isInitialized,authState:e.authState}},function(e,t){return{init:t.init}})(l);exports.default=s;
},{"./lib/teactn":"g4k8","./modules":"omRF","./pages/loading/Loading":"SqZv","./pages/auth/Auth":"ORTp","./pages/main/Main":"Oo8G"}],"zo2T":[function(require,module,exports) {
"use strict";var e=a(require("./lib/teactn")),t=n(require("./lib/teact-dom")),r=n(require("./App"));function n(e){return e&&e.__esModule?e:{default:e}}function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function a(e){if(e&&e.__esModule)return e;var t=o();if(t&&t.has(e))return t.get(e);var r={};if(null!=e){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var u=n?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(r,a,u):r[a]=e[a]}}return r.default=e,t&&t.set(e,r),r}require("./global.scss");var u=function(){return(u=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};t.default.render(e.default.createElement(r.default,null),document.getElementById("root")),document.addEventListener("dblclick",function(){console.log("GLOBAL STATE",(0,e.getGlobal)())}),document.addEventListener("contextmenu",function(){(0,e.setGlobal)(u(u({},(0,e.getGlobal)()),{authState:"authorizationStateReady"}))});
},{"./lib/teactn":"g4k8","./lib/teact-dom":"DDjc","./App":"NHn6","./global.scss":"Mqd8"}]},{},["zo2T"], null)
//# sourceMappingURL=src.0ecb2069.js.map